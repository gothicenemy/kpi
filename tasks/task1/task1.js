function mapWithCallback(array, callback, completionCallback) {
    const results = [];
    let processedItems = 0;

